app-id: com.github.makhber.Makhber
runtime: org.kde.Platform
sdk: org.kde.Sdk
runtime-version: '5.15'
command: makhber
finish-args:
  - --share=ipc
  - --socket=x11
  - --socket=wayland
  - --filesystem=host
  - --device=dri

modules:
  - name: gsl
    config-opts:
      - --disable-static
    cleanup:
      - /bin
      - /include
      - /lib/*.la
      - /lib/pkgconfig
    sources:
      - type: archive
        url: https://ftp.gnu.org/gnu/gsl/gsl-2.6.tar.gz
        sha256: b782339fc7a38fe17689cb39966c4d821236c28018b6593ddb6fd59ee40786a8

  - name: muparser
    buildsystem: cmake-ninja
    config-opts:
      - -DCMAKE_BUILD_TYPE=Release
    cleanup:
      - /include
      - /lib/pkgconfig
    sources:
      - type: archive
        url: https://github.com/beltoforion/muparser/archive/v2.3.2.tar.gz
        sha256: b35fc84e3667d432e3414c8667d5764dfa450ed24a99eeef7ee3f6647d44f301

  - name: glu
    config-opts: 
      - --disable-static
      - --disable-debug
    sources:
      - type: archive
        url: https://mesa.freedesktop.org/archive/glu/glu-9.0.1.tar.xz
        sha256: fb5a4c2dd6ba6d1c21ab7c05129b0769544e1d68e1e3b0ffecb18e73c93055bc
    cleanup: 
      - /include
      - /lib/*.a
      - /lib/*.la
      - /lib/pkgconfig

  - name: makhber
    buildsystem: cmake-ninja
    config-opts:
      - -DCMAKE_BUILD_TYPE=Release
      - -DMAKHBER_SEARCH_FOR_UPDATES=OFF
      - -DMAKHBER_DOWNLOAD_LINKS=OFF
    sources:
      - type: dir
        path: ..
